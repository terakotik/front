<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Искусство в Деталях: Пройдите тест на Усталый Взгляд с AI-советами</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
        /* Кастомные стили для улучшения дизайна */
        body {
            font-family: 'Inter', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        .gradient-text {
            background: linear-gradient(45deg, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-fill-color: transparent;
        }
        .custom-checkbox input:checked ~ .checkmark {
            background-color: #4f46e5;
            border-color: #4f46e5;
            transform: scale(1.05);
        }
        .custom-checkbox input:checked ~ .checkmark svg {
            transform: scale(1);
        }
        .custom-checkbox input:checked ~ .checklist-text {
             text-decoration: line-through;
             color: #64748b; /* text-slate-500 */
        }
        .custom-checkbox .checkmark svg {
            transform: scale(0);
            transition: transform 0.2s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }
        /* Стили для спиннера загрузки */
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #4f46e5;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-700">

    <div class="container mx-auto max-w-4xl px-4 py-8 sm:py-16">
        
        <header class="text-center mb-12">
            <h1 class="text-4xl sm:text-5xl md:text-6xl font-extrabold tracking-tight text-slate-800">
                <span class="block">Глаза Выдают Возраст:</span>
                <span class="block gradient-text mt-2">Чек-лист с AI-советами</span>
            </h1>
        </header>

        <div class="max-w-4xl mx-auto mb-16">
            <div class="flex flex-col md:flex-row items-center gap-8 md:gap-12 bg-white p-8 rounded-2xl shadow-lg shadow-slate-200/50">
                <!-- Контейнер для фото и имени, теперь центрированный -->
                <div class="flex-shrink-0 text-center flex flex-col items-center">
                    <img src="https://www.galaxy.clinic/Vrachi_plastika/2024/siverina_big_2024-09-11.png?1751655857035" 
                         alt="Фотография Евгении Сивериной, пластического хирурга"
                         class="w-48 h-48 md:w-56 md:h-56 rounded-full object-cover object-top shadow-2xl shadow-indigo-200 border-4 border-white"
                         onerror="this.onerror=null;this.src='https://placehold.co/224x224/e0e7ff/4338ca?text=Фото';">
                    <div class="mt-4">
                        <p class="font-bold text-lg text-slate-800">Сиверина Евгения Алексеевна</p>
                        <p class="text-sm text-slate-500">Эстетический пластический хирург</p>
                        <p class="text-sm text-indigo-600 font-medium">Клиника Галактика</p>
                    </div>
                </div>
                <div class="text-lg text-slate-600 space-y-4 text-center md:text-left">
                     <p>
                        Знакомо ли вам это чувство? Вы стараетесь хорошо выглядеть, ухаживаете за собой, но <strong>усталый взгляд</strong> по-прежнему выдает возраст и портит все впечатление.
                    </p>
                    <p>
                        Меня зовут <strong>Евгения Сиверина</strong>, и как пластический хирург, я знаю, что <strong>свежий и отдохнувший взгляд</strong> — это ключ к уверенности в себе.
                    </p>
                    <p>
                        Этот <strong>чек-лист</strong> поможет вам <strong>объективно оценить</strong> состояние области вокруг глаз и понять, когда обычного ухода уже недостаточно.
                    </p>
                </div>
            </div>
        </div>
        
        <div class="bg-white/60 backdrop-blur-sm border border-indigo-200 rounded-2xl p-6 text-center mb-12 max-w-3xl mx-auto shadow-sm">
            <h2 class="text-xl font-bold text-indigo-700">Ваши Возможности Исчерпаны? Проверьте Себя!</h2>
            <p class="mt-2 text-slate-600">
                Пройдите по пунктам ниже. Если вы отметите <strong>3 и более пункта</strong>, это сильный сигнал, что пора задуматься о более серьезных решениях.
            </p>
        </div>

        <div class="space-y-8 max-w-3xl mx-auto">
            <!-- Секции чек-листа -->
            <div class="bg-white rounded-2xl shadow-lg shadow-slate-200/50 overflow-hidden">
                <h3 class="text-lg font-bold text-slate-800 bg-slate-100 px-6 py-4 border-b border-slate-200">1. Верхние Веки и Брови</h3>
                <ul class="divide-y divide-slate-200 checklist-group">
                    <li class="p-4 sm:p-6 hover:bg-slate-50 transition-colors duration-200">
                        <label class="custom-checkbox flex items-start cursor-pointer">
                            <input type="checkbox" class="hidden checklist-item">
                            <div class="checkmark flex-shrink-0 w-6 h-6 rounded-md border-2 border-slate-300 bg-slate-100 mr-4 mt-1 flex items-center justify-center transition-all duration-300">
                                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>
                            </div>
                            <span class="checklist-text text-base text-slate-700"><strong>Избыток кожи верхних век:</strong> Кожа <strong>сильно нависает</strong>, закрывая подвижную часть века или свисая ниже.</span>
                        </label>
                    </li>
                    <li class="p-4 sm:p-6 hover:bg-slate-50 transition-colors duration-200">
                        <label class="custom-checkbox flex items-start cursor-pointer">
                            <input type="checkbox" class="hidden checklist-item">
                            <div class="checkmark flex-shrink-0 w-6 h-6 rounded-md border-2 border-slate-300 bg-slate-100 mr-4 mt-1 flex items-center justify-center transition-all duration-300">
                                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>
                            </div>
                            <span class="checklist-text text-base text-slate-700"><strong>Ограничение поля зрения:</strong> Вы замечаете, что <strong>нависающая кожа мешает полноценно видеть</strong> по сторонам.</span>
                        </label>
                    </li>
                     <li class="p-4 sm:p-6 hover:bg-slate-50 transition-colors duration-200">
                        <label class="custom-checkbox flex items-start cursor-pointer">
                            <input type="checkbox" class="hidden checklist-item">
                            <div class="checkmark flex-shrink-0 w-6 h-6 rounded-md border-2 border-slate-300 bg-slate-100 mr-4 mt-1 flex items-center justify-center transition-all duration-300">
                                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>
                            </div>
                            <span class="checklist-text text-base text-slate-700"><strong>Низкое положение бровей:</strong> Брови "упали" и придают лицу хмурое выражение, а косметологические процедуры <strong>не дают нужного эффекта</strong>.</span>
                        </label>
                    </li>
                     <li class="p-4 sm:p-6 hover:bg-slate-50 transition-colors duration-200">
                        <label class="custom-checkbox flex items-start cursor-pointer">
                            <input type="checkbox" class="hidden checklist-item">
                            <div class="checkmark flex-shrink-0 w-6 h-6 rounded-md border-2 border-slate-300 bg-slate-100 mr-4 mt-1 flex items-center justify-center transition-all duration-300">
                                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>
                            </div>
                            <span class="checklist-text text-base text-slate-700"><strong>Постоянная "тяжесть" в глазах:</strong> Вы отмечаете это чувство постоянно, даже после полноценного отдыха.</span>
                        </label>
                    </li>
                </ul>
            </div>
            <div class="bg-white rounded-2xl shadow-lg shadow-slate-200/50 overflow-hidden">
                <h3 class="text-lg font-bold text-slate-800 bg-slate-100 px-6 py-4 border-b border-slate-200">2. Нижние Веки и Область Вокруг Глаз</h3>
                <ul class="divide-y divide-slate-200 checklist-group">
                     <li class="p-4 sm:p-6 hover:bg-slate-50 transition-colors duration-200">
                        <label class="custom-checkbox flex items-start cursor-pointer">
                            <input type="checkbox" class="hidden checklist-item">
                            <div class="checkmark flex-shrink-0 w-6 h-6 rounded-md border-2 border-slate-300 bg-slate-100 mr-4 mt-1 flex items-center justify-center transition-all duration-300">
                                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>
                            </div>
                            <span class="checklist-text text-base text-slate-700"><strong>Выраженные жировые грыжи ("мешки"):</strong> "Мешки" под глазами <strong>постоянны</strong> и <strong>не уменьшаются</strong> после отдыха или процедур.</span>
                        </label>
                    </li>
                     <li class="p-4 sm:p-6 hover:bg-slate-50 transition-colors duration-200">
                        <label class="custom-checkbox flex items-start cursor-pointer">
                            <input type="checkbox" class="hidden checklist-item">
                            <div class="checkmark flex-shrink-0 w-6 h-6 rounded-md border-2 border-slate-300 bg-slate-100 mr-4 mt-1 flex items-center justify-center transition-all duration-300">
                                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>
                            </div>
                            <span class="checklist-text text-base text-slate-700"><strong>Стойкие "малярные мешки" (суфы):</strong> Заметные отеки в области скул, которые <strong>не реагируют на обычные методы коррекции</strong>.</span>
                        </label>
                    </li>
                     <li class="p-4 sm:p-6 hover:bg-slate-50 transition-colors duration-200">
                        <label class="custom-checkbox flex items-start cursor-pointer">
                            <input type="checkbox" class="hidden checklist-item">
                            <div class="checkmark flex-shrink-0 w-6 h-6 rounded-md border-2 border-slate-300 bg-slate-100 mr-4 mt-1 flex items-center justify-center transition-all duration-300">
                                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>
                            </div>
                            <span class="checklist-text text-base text-slate-700"><strong>Значительная дряблость кожи нижних век:</strong> Кожа <strong>очень тонкая, морщинистая</strong>, и ее вид не улучшается от кремов и сывороток.</span>
                        </label>
                    </li>
                </ul>
            </div>
            <div class="bg-white rounded-2xl shadow-lg shadow-slate-200/50 overflow-hidden">
                <h3 class="text-lg font-bold text-slate-800 bg-slate-100 px-6 py-4 border-b border-slate-200">3. Общие Ощущения и Результаты</h3>
                <ul class="divide-y divide-slate-200 checklist-group">
                     <li class="p-4 sm:p-6 hover:bg-slate-50 transition-colors duration-200">
                        <label class="custom-checkbox flex items-start cursor-pointer">
                            <input type="checkbox" class="hidden checklist-item">
                            <div class="checkmark flex-shrink-0 w-6 h-6 rounded-md border-2 border-slate-300 bg-slate-100 mr-4 mt-1 flex items-center justify-center transition-all duration-300">
                                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>
                            </div>
                            <span class="checklist-text text-base text-slate-700"><strong>Желание кардинальных перемен:</strong> Вы хотите таких изменений, которые <strong>объективно невозможно</strong> достичь только уходовыми средствами.</span>
                        </label>
                    </li>
                     <li class="p-4 sm:p-6 hover:bg-slate-50 transition-colors duration-200">
                        <label class="custom-checkbox flex items-start cursor-pointer">
                            <input type="checkbox" class="hidden checklist-item">
                            <div class="checkmark flex-shrink-0 w-6 h-6 rounded-md border-2 border-slate-300 bg-slate-100 mr-4 mt-1 flex items-center justify-center transition-all duration-300">
                                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>
                            </div>
                            <span class="checklist-text text-base text-slate-700"><strong>Неудовлетворенность результатами:</strong> Вы уже пробовали разные процедуры, но <strong>результат вас не устраивает</strong> или держится очень недолго.</span>
                        </label>
                    </li>
                     <li class="p-4 sm:p-6 hover:bg-slate-50 transition-colors duration-200">
                        <label class="custom-checkbox flex items-start cursor-pointer">
                            <input type="checkbox" class="hidden checklist-item">
                            <div class="checkmark flex-shrink-0 w-6 h-6 rounded-md border-2 border-slate-300 bg-slate-100 mr-4 mt-1 flex items-center justify-center transition-all duration-300">
                                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path></svg>
                            </div>
                            <span class="checklist-text text-base text-slate-700"><strong>Быстрое возвращение проблемы:</strong> Эффект от косметологических процедур в области глаз <strong>исчезает слишком быстро</strong> (менее 3-6 месяцев).</span>
                        </label>
                    </li>
                </ul>
            </div>
        </div>

        <div class="text-center mt-12">
            <button id="checkButton" class="bg-indigo-600 text-white font-bold text-lg px-10 py-4 rounded-xl shadow-lg shadow-indigo-200 hover:bg-indigo-700 focus:outline-none focus:ring-4 focus:ring-indigo-300 transition-all duration-300 transform hover:-translate-y-1">
                Проверить и получить совет AI
            </button>
            
            <div id="resultMessage" class="hidden mt-8 max-w-2xl mx-auto p-6 rounded-2xl text-lg font-medium"></div>

            <!-- Новый блок для AI-советов -->
            <div id="geminiAdviceContainer" class="hidden mt-6 max-w-2xl mx-auto text-left">
                <h3 class="text-2xl font-bold text-slate-800 text-center mb-4">Персональный совет от AI-ассистента</h3>
                <div id="geminiLoader" class="flex justify-center items-center p-8">
                    <div class="loader"></div>
                </div>
                <div id="geminiAdvice" class="p-6 bg-white rounded-2xl shadow-lg shadow-slate-200/50 space-y-3 text-slate-700"></div>
            </div>
        </div>
    </div>

    <script>
        // DOM элементы
        const checkButton = document.getElementById('checkButton');
        const resultMessageDiv = document.getElementById('resultMessage');
        const checkboxes = document.querySelectorAll('.checklist-item');
        const geminiAdviceContainer = document.getElementById('geminiAdviceContainer');
        const geminiLoader = document.getElementById('geminiLoader');
        const geminiAdviceDiv = document.getElementById('geminiAdvice');

        // Обработчик изменения чекбокса
        checkboxes.forEach(checkbox => {
            checkbox.addEventListener('change', (event) => {
                const label = event.target.closest('label');
                if (event.target.checked) {
                    label.parentElement.classList.add('bg-indigo-50');
                } else {
                    label.parentElement.classList.remove('bg-indigo-50');
                }
            });
        });
        
        // Функция для получения совета от Gemini
        async function getGeminiAdvice(checkedItems, resultType) {
            geminiLoader.style.display = 'flex';
            geminiAdviceDiv.style.display = 'none';
            geminiAdviceContainer.classList.remove('hidden');
            geminiAdviceContainer.classList.add('fade-in');

            let prompt;
            if (resultType === 'warning') {
                prompt = `Выступи в роли опытного пластического хирурга-консультанта. Мой пациент прошел чек-лист и отметил следующие проблемы: ${checkedItems.join(', ')}. Дай ему краткий, но емкий и ободряющий совет на русском языке. Объясни, почему в его случае косметологии может быть уже недостаточно и на какие хирургические решения стоит обратить внимание (например, блефаропластика, эндоскопический лифтинг). Не давай прямых медицинских рекомендаций, а мягко направь на очную консультацию к специалисту. Заверши совет позитивным утверждением о современных возможностях. Форматируй ответ с использованием списков.`;
            } else {
                prompt = `Выступи в роли опытного косметолога-эксперта. Мой пациент прошел чек-лист и отметил следующие незначительные проблемы: ${checkedItems.join(', ')}. Дай ему несколько полезных, практических и неочевидных советов на русском языке по уходу за областью вокруг глаз, чтобы сохранить молодость взгляда. Упомяни важность лимфодренажа, защиты от солнца и качественного сна. Не рекламируй конкретные бренды. Совет должен быть ободряющим и мотивирующим. Форматируй ответ с использованием списков.`;
            }

            try {
                let chatHistory = [{ role: "user", parts: [{ text: prompt }] }];
                const payload = { contents: chatHistory };
                const apiKey = ""; // API-ключ будет предоставлен средой выполнения
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`Ошибка API: ${response.statusText}`);
                }

                const result = await response.json();
                
                let text = "Не удалось получить совет. Попробуйте еще раз.";
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    text = result.candidates[0].content.parts[0].text;
                }
                
                geminiAdviceDiv.innerHTML = text.replace(/\n/g, '<br>');

            } catch (error) {
                console.error("Ошибка при вызове Gemini API:", error);
                geminiAdviceDiv.innerText = "К сожалению, произошла ошибка при генерации совета. Пожалуйста, проверьте консоль для получения дополнительной информации.";
            } finally {
                geminiLoader.style.display = 'none';
                geminiAdviceDiv.style.display = 'block';
                geminiAdviceDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }

        // Основная функция проверки результатов
        function checkResults() {
            const checkedCheckboxes = document.querySelectorAll('.checklist-item:checked');
            const checkedCount = checkedCheckboxes.length;
            
            const checkedItems = Array.from(checkedCheckboxes).map(cb => {
                return cb.closest('label').querySelector('.checklist-text').innerText;
            });

            resultMessageDiv.className = 'hidden mt-8 max-w-2xl mx-auto p-6 rounded-2xl text-lg font-medium text-center';
            
            const giftIcon = `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block -mt-1" viewBox="0 0 20 20" fill="currentColor"><path d="M10 2a2 2 0 00-2 2v1a2 2 0 004 0V4a2 2 0 00-2-2z"></path><path fill-rule="evenodd" d="M3 6a2 2 0 012-2h10a2 2 0 012 2v1a1 1 0 11-2 0V6H5v1a1 1 0 11-2 0V6zm3 4a2 2 0 00-2 2v3a2 2 0 002 2h8a2 2 0 002-2v-3a2 2 0 00-2-2H6zm2 4a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"></path></svg>`;
            const ctaButton = `<a href="https://t.me/doctorSiverina" target="_blank" class="mt-4 inline-block bg-white text-indigo-600 font-bold px-6 py-3 rounded-lg shadow-md hover:bg-indigo-50 transition-all duration-300"> ${giftIcon} <span class="ml-2">Подписаться и получить чек-лист</span></a>`;

            let message = '';
            let resultType = '';

            if (checkedCount >= 3) {
                resultType = 'warning';
                message = `<strong>Похоже, проблема серьезнее, чем кажется.</strong> Вы отметили <strong>${checkedCount}</strong> пункта(ов).<br>Но не волнуйтесь, решение есть! В моей группе Telegram я рассказываю все о современных методах омоложения взгляда. <br>${ctaButton}`;
                resultMessageDiv.classList.add('bg-amber-100', 'border-2', 'border-amber-200', 'text-amber-900');
            } else {
                resultType = 'success';
                message = `Вы отметили <strong>${checkedCount}</strong> пункта(ов). Отличный результат! <br>Чтобы сохранить молодость взгляда надолго, важен правильный уход. Узнайте все секреты в моей группе Telegram. <br>${ctaButton}`;
                resultMessageDiv.classList.add('bg-green-100', 'border-2', 'border-green-200', 'text-green-900');
            }
            
            resultMessageDiv.innerHTML = message;
            resultMessageDiv.classList.remove('hidden');
            resultMessageDiv.classList.add('fade-in');
            resultMessageDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });

            // Вызываем Gemini API
            getGeminiAdvice(checkedItems, resultType);
        }

        checkButton.addEventListener('click', checkResults);
    </script>
</body>
</html>

